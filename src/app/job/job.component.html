<div fxLayout    = "row"
     fxLayoutGap = "30px"
     [id]        = "job.id">

  <!-- company logo column -->
  <img class       = "job-logo"
       [src]       = "job.logo"
       fxFlex      = "none"
       fxFlexAlign = "start">

  <!-- main content column -->
  <div fxLayout = "column" fxFlex>

    <!-- header for job level, company, period of work, contact details -->
    <!-- in line with company logo -->
    <div class         = "job-header"
         fxLayout      = "column"
         fxLayoutGap   = "6px"
         fxLayoutAlign = "center">

      <div class="job-level">
        {{job.level}}
      </div>

      <div>

        <span class = "job-company">
          <a *ngIf = "job.link" [href] = "job.link">{{job.companyName}}</a>
          <span *ngIf = "!job.link">{{job.companyName}}</span>
        </span>
        
        <span class = "job-period"
              *ngIf = "job?.start">
            {{job.end?'':'since'}}
            {{job.start | date:'MMM yyyy'}}
            {{job.end?' â€“ ':''}}
            {{job.end?(job.end | date:'MMM yyyy'):''}}
            {{getJobDurationString()}}
        </span>

      </div>

      <div *ngIf = "job?.contact"
           class = "job-contact">
          References available from 
          <a *ngIf  = "job?.contactEmail"
             [href] = "'mailto:' + job.contactEmail"
             target = "_blank">
            {{job.contact}}</a>
          <span *ngIf = "!job?.contactEmail">
            {{job.contact}}</span>
      </div>

    </div>

    <!-- job description and roles -->
    <markdown *ngIf  = "job?.description"
              [src]  = "job.description"
              (load) = "jobDescriptionLoadComplete()"></markdown>
    <app-role *ngFor = "let role of job?.roles"
              [role] = "role"
              (load) = "roleLoadComplete($event)"></app-role>

    <!-- list of technologies used -->
    <ng-container *ngIf = "job?.technologies">
      <h3>Technologies used</h3>
      <app-tech-list [techs] = "job.technologies"></app-tech-list>
    </ng-container>
    
  </div>
</div>
